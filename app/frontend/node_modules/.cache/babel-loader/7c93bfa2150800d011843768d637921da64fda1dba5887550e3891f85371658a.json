{"ast":null,"code":"import'./App.css';import React,{useState,useEffect}from'react';import axios from'axios';import{BrowserRouter as Router,Route,Routes}from'react-router-dom';import NavbarComponent from'./components/NavbarComponent';import LoginPage from'./components/LoginPage';import RegisterPage from'./components/RegisterPage';import HomePage from'./components/HomePage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.defaults.withCredentials=true;const client=axios.create({baseURL:\"http://127.0.0.1:8000\"});function App(){const[currentUser,setCurrentUser]=useState();const[registrationToggle,setRegistrationToggle]=useState(false);const[email,setEmail]=useState('');const[username,setUsername]=useState('');const[password,setPassword]=useState('');useEffect(()=>{client.get(\"/api/user\").then(function(res){setCurrentUser(true);}).catch(function(error){setCurrentUser(false);});},[]);function updateFormBtn(){setRegistrationToggle(!registrationToggle);}function submitRegistration(e){e.preventDefault();client.post(\"/api/register\",{email,username,password}).then(function(res){client.post(\"/api/login\",{email,password}).then(function(res){setCurrentUser(true);});});}function submitLogin(e){e.preventDefault();client.post(\"/api/login\",{email,password}).then(function(res){setCurrentUser(true);});}function submitLogout(e){e.preventDefault();client.post(\"/api/logout\",{withCredentials:true}).then(function(res){setCurrentUser(false);});}return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(NavbarComponent,{isAuthenticated:currentUser,onLogout:submitLogout,onToggle:updateFormBtn}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/home\",element:currentUser?/*#__PURE__*/_jsx(HomePage,{}):/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{email:email,password:password,setEmail:setEmail,setPassword:setPassword,submitLogin:submitLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(RegisterPage,{email:email,username:username,password:password,setEmail:setEmail,setUsername:setUsername,setPassword:setPassword,submitRegistration:submitRegistration})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(RegisterPage,{})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","BrowserRouter","Router","Route","Routes","NavbarComponent","LoginPage","RegisterPage","HomePage","jsx","_jsx","jsxs","_jsxs","defaults","xsrfCookieName","xsrfHeaderName","withCredentials","client","create","baseURL","App","currentUser","setCurrentUser","registrationToggle","setRegistrationToggle","email","setEmail","username","setUsername","password","setPassword","get","then","res","catch","error","updateFormBtn","submitRegistration","e","preventDefault","post","submitLogin","submitLogout","children","isAuthenticated","onLogout","onToggle","path","element"],"sources":["C:/Users/manda/OneDrive/Desktop/Django/app/frontend/src/App.js"],"sourcesContent":["import './App.css';\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\r\nimport NavbarComponent from './components/NavbarComponent';\r\nimport LoginPage from './components/LoginPage';\r\nimport RegisterPage from './components/RegisterPage';\r\nimport HomePage from './components/HomePage';\r\n\r\naxios.defaults.xsrfCookieName = 'csrftoken';\r\naxios.defaults.xsrfHeaderName = 'X-CSRFToken';\r\naxios.defaults.withCredentials = true;\r\n\r\nconst client = axios.create({\r\n    baseURL: \"http://127.0.0.1:8000\"\r\n});\r\n\r\nfunction App() {\r\n    const [currentUser, setCurrentUser] = useState();\r\n    const [registrationToggle, setRegistrationToggle] = useState(false);\r\n    const [email, setEmail] = useState('');\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    useEffect(() => {\r\n        client.get(\"/api/user\")\r\n            .then(function (res) {\r\n                setCurrentUser(true);\r\n            })\r\n            .catch(function (error) {\r\n                setCurrentUser(false);\r\n            });\r\n    }, []);\r\n\r\n    function updateFormBtn() {\r\n        setRegistrationToggle(!registrationToggle);\r\n    }\r\n\r\n    function submitRegistration(e) {\r\n        e.preventDefault();\r\n        client.post(\r\n            \"/api/register\",\r\n            { email, username, password }\r\n        ).then(function (res) {\r\n            client.post(\r\n                \"/api/login\",\r\n                { email, password }\r\n            ).then(function (res) {\r\n                setCurrentUser(true);\r\n            });\r\n        });\r\n    }\r\n\r\n    function submitLogin(e) {\r\n        e.preventDefault();\r\n        client.post(\r\n            \"/api/login\",\r\n            { email, password }\r\n        ).then(function (res) {\r\n            setCurrentUser(true);\r\n        });\r\n    }\r\n\r\n    function submitLogout(e) {\r\n        e.preventDefault();\r\n        client.post(\r\n            \"/api/logout\",\r\n            { withCredentials: true }\r\n        ).then(function (res) {\r\n            setCurrentUser(false);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <NavbarComponent\r\n                isAuthenticated={currentUser}\r\n                onLogout={submitLogout}\r\n                onToggle={updateFormBtn}\r\n            />\r\n            <Routes>\r\n                <Route path=\"/home\" element={currentUser ? <HomePage /> : <LoginPage />} />\r\n                <Route path=\"/login\" element={<LoginPage email={email} password={password} setEmail={setEmail} setPassword={setPassword} submitLogin={submitLogin} />} />\r\n                <Route path=\"/register\" element={<RegisterPage email={email} username={username} password={password} setEmail={setEmail} setUsername={setUsername} setPassword={setPassword} submitRegistration={submitRegistration} />} />\r\n                <Route path=\"/\" element={<RegisterPage/>} />\r\n            </Routes>\r\n        </Router>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}